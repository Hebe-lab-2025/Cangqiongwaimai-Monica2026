很好 👍 直接用 ASCII 图把 `git stash` 工作流讲清楚。

---

## 🧭 场景 1：代码写一半 → 临时保存 → 切分支

```
(工作区正在开发中)
        |
        v
+---------------------+
|  修改中的代码       |
|  feature 未完成     |
+---------------------+
        |
        |  git stash
        v
+---------------------+
|  工作区恢复干净     |  ← 回到没有修改的状态
+---------------------+
        |
        |  git switch other-branch
        v
+---------------------+
|  切换到其他分支     |
|  去修紧急 bug       |
+---------------------+
```

stash 就像 ➜ **把东西先装进背包**

---

## 🎒 Stash 其实是一个“栈”

```
Top ->  [stash@{0}]  最新
        [stash@{1}]
        [stash@{2}]
        ...
Bottom
```

命令关系：

```
git stash push   → 压入
git stash list   → 查看
git stash pop    → 弹出（应用+删除顶部）
git stash apply  → 只应用不删除
git stash drop   → 删除某一项
```

---

## 🧭 场景 2：stash pop（恢复未完成代码）

```
(你修完 bug 回来了)
        |
        v
+----------------------+
| 当前分支代码干净     |
+----------------------+
        |
        |  git stash pop
        v
+----------------------+
| 恢复你刚才写一半的   |
| 代码回工作区         |
+----------------------+
        |
        |  继续开发...
        v
```

**pop = 取出来 + 从背包里删除**

---

## ⚠️ 有冲突时发生了什么？

```
              git stash pop
                     |
                     v
        +----------------------------+
        |        合并代码            |
        +----------------------------+
                 /        \
             无冲突        冲突
               |             |
               v             v
        正常恢复         <<<<<<< HEAD
                         =======
                         >>>>>>>
                     手动解决 → git add → commit
```

---

## 🧭 场景 3：apply vs pop 区别图

```
git stash apply
+----------+         +----------+
|  stash   |  保留   |  stash   |
+----------+  ---->  +----------+
                           ^
                           |
                      仍然在栈里


git stash pop
+----------+         +----------+
|  stash   |  删除   |  (空)    |
+----------+  ---->  +----------+
```

👉 记忆：

* **apply**：复制
* **pop**：剪切

---

## 🧭 总体时序图（从写代码到恢复）

```
写代码
  |
  v
修改工作区
  |
  | git stash
  v
保存到 stash 栈
  |
  | 切分支 / pull / 修 bug
  |
  v
回原分支
  |
  | git stash pop/apply
  v
取回刚才未完成代码
```

---

如果你愿意，我还可以帮你：

* 🧪 画一张 **git stash + git pull + rebase** 组合流程图
* ⚔️ 画 **冲突标记位置 ASCII 图**
* 🎯 出 10 道 Git 面试 stash 相关题（含答案）
