
å¾ˆå¥½ï¼Œè¿™ä¸ªé—®é¢˜æŠ“å¾—å¾ˆå‡† ğŸ‘
æˆ‘ä»¬å°±ä¸“é—¨è®²â€”â€”**squash åœ¨ Git é‡Œçš„æ„æ€ + æ€ä¹ˆç”¨**ã€‚

---

## âœ… squash åœ¨ Git é‡Œçš„æ„æ€

**ä¸­æ–‡å«ä¹‰ï¼šå‹ç¼© / å‹æ‰ / åˆå¹¶**

ğŸ‘‰ åœ¨ Git é‡Œï¼Œsquash æŒ‡ï¼š

> **æŠŠå¤šä¸ª commit åˆå¹¶æˆæ›´å°‘çš„ commitï¼ˆé€šå¸¸ 1 ä¸ªï¼‰**

ä¹Ÿå°±æ˜¯æŠŠé›¶ç¢å†å²æ•´ç†æˆå¹²å‡€çš„ä¸€æ¡ã€‚

---

## ğŸ§­ ä¸ºä»€ä¹ˆè¦ç”¨ squashï¼Ÿ

å…¸å‹æƒ…å†µï¼š

ä½ å¼€å‘æ—¶äº§ç”Ÿå¾ˆå¤šå°æäº¤ï¼š

```
fix typo
add debug log
remove debug log
really final fix
```

æäº¤å†å²å¾ˆä¹± âŒ

åœ¨æäº¤ PR / ä»£ç è¯„å®¡ä¹‹å‰ï¼š

ğŸ‘‰ ä½ å¸Œæœ›åªä¿ç•™ä¸€ä¸ªæ¸…æ™°çš„ commit

ä¾‹å¦‚ï¼š

```
feat: add checkout service
```

è¿™å°±æ˜¯ squash çš„ç”¨é€” âœ”

---

## ğŸ› ï¸ squash çš„ä¸¤ç§å¸¸è§ä½¿ç”¨æ–¹å¼

---

# ğŸŸ¢ æ–¹æ³•ä¸€ï¼šåœ¨ rebase è¿‡ç¨‹ä¸­ä½¿ç”¨ squashï¼ˆæœ€å¸¸ç”¨ï¼‰

### ç¬¬ 1 æ­¥ï¼šæŸ¥çœ‹æœ€è¿‘æäº¤

```
git log --oneline
```

---

### ç¬¬ 2 æ­¥ï¼šè¿›å…¥äº¤äº’å¼ rebase

ä¾‹å¦‚åˆå¹¶æœ€è¿‘ 4 ä¸ªæäº¤ï¼š

```
git rebase -i HEAD~4
```

---

### ç¬¬ 3 æ­¥ï¼šæŠŠè¦åˆå¹¶çš„ commit æ ‡è®°ä¸º squash

ä½ ä¼šçœ‹åˆ°ï¼š

```
pick c1 message1
pick c2 message2
pick c3 message3
pick c4 message4
```

ä¿®æ”¹ä¸ºï¼š

```
pick c1 message1
squash c2 message2
squash c3 message3
squash c4 message4
```

ğŸ‘‰ è§„åˆ™ï¼š

* ç¬¬ä¸€ä¸ªä¿ç•™ `pick`
* ä¹‹åæ”¹ `squash` æˆ– `s`

---

### ç¬¬ 4 æ­¥ï¼šä¿å­˜ â†’ åˆå¹¶ commit message

Git ä¼šæç¤ºä½ ç¼–è¾‘æ–°çš„ message
å†™æˆä¸€å¥è¯å°±è¡Œï¼Œä¾‹å¦‚ï¼š

```
feat: implement user login service
```

---

### âœ” ç»“æœ

ä¹‹å‰ 4 æ¬¡ commit
ğŸ‘‰ å˜æˆ 1 ä¸ª commit

---

# ğŸŸ¡ æ–¹æ³•äºŒï¼šä¸€å£æ°”æŠŠæœ€è¿‘ N ä¸ªå‹æˆ 1 ä¸ªï¼ˆç®€å•ç²—æš´ï¼‰

```
git reset --soft HEAD~4
git commit -m "new single commit"
```

å«ä¹‰ï¼š

* å›é€€ 4 æ¬¡æäº¤åˆ°æš‚å­˜åŒº
* å†æ‰“ä¸€å‘æ–°çš„ commit

ğŸ‘‰ ä¹Ÿç­‰ä»·äº squash
ğŸ‘‰ ä½†ä¸èƒ½é€‰æ‹©æ€§åˆå¹¶ä¸­é—´æŸå‡ ä¸ª

---

## âš ï¸ éå¸¸é‡è¦çš„æ³¨æ„äº‹é¡¹

squash ä¼š **æ”¹å†™å†å²**ï¼š

* commit ID ä¼šæ”¹å˜
* rebase å push éœ€è¦å¼ºæ¨

å¦‚æœè¿™äº› commit å·²ç» push ç»™åˆ«äººç”¨äº†ï¼š

```
git push -f
```

âš  åªåœ¨æ²Ÿé€šç¡®è®¤ååšï¼ˆå›¢é˜Ÿåä½œä¸­å¾ˆé‡è¦ï¼‰

---

## ğŸ§  è¶…çŸ­è®°å¿†ç‰ˆ

* **squash = åˆå¹¶ commit**
* å¸¸ç”¨å‘½ä»¤ï¼š

  ```
  git rebase -i HEAD~N
  ```
* ç¼–è¾‘å™¨é‡Œï¼š

  ```
  pick = ä¿ç•™
  squash = åˆå¹¶åˆ°ä¸Šä¸€æ¡
  ```

---

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘è¿˜èƒ½ç»§ç»­å¸®ä½ ï¼š

* ğŸ§­ ç”»ä¸€å¼  ASCII å›¾è§£é‡Š squash
* ğŸ¯ å¸¦ä½ å¯¹ç€çœŸå®æ—¥å¿—åšä¸€é
* âš”ï¸ è®² squash å¤±è´¥/å†²çªæ€ä¹ˆè§£å†³
* ğŸ§ª å‡ºå‡ é“ Git é¢è¯•é¢˜ç»™ä½ ç»ƒä¹ 


