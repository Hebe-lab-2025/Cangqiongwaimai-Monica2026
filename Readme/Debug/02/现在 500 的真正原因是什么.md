太好了，这一段日志一出来，真相就很清楚了 👍

---

## 1. 现在 500 的真正原因是什么？

关键几行我给你摘出来：

```text
2026-01-07 18:21:49.227 DEBUG ... EmployeeMapper.getByUsername  : ==>  Preparing: select * from employee where username = ?
2026-01-07 18:21:49.242 DEBUG ... EmployeeMapper.getByUsername  : ==> Parameters: admin1(String)
2026-01-07 18:21:49.266 DEBUG ... EmployeeMapper.getByUsername  : <==      Total: 0
...
com.sky.exception.AccountNotFoundException: 账号不存在
	at com.sky.service.impl.EmployeeServiceImpl.login(EmployeeServiceImpl.java:37)
```

翻译成人话：

1. 后端收到登录请求：

   ```text
   员工登录：EmployeeLoginDTO(username=admin1, password=123456)
   ```

2. MyBatis 执行 SQL：

   ```sql
   select * from employee where username = 'admin1';
   ```

3. 查询结果：`Total: 0`，说明 **employee 表里没有用户名为 `admin1` 的员工**。

4. 然后在 `EmployeeServiceImpl.login()` 第 37 行，**你自己（或教程）写的业务逻辑**主动抛出异常：

   ```java
   if (employee == null) {
       throw new AccountNotFoundException("账号不存在");
   }
   ```

5. 这个自定义异常 `AccountNotFoundException` **没有被全局异常处理器正常处理成 Result JSON**，于是直接一路抛到 Spring，最后变成 HTTP 500。

> 所以：
> ✅ 数据库 / Mapper / Service 都是“正常在工作”的
> ❌ 只是你用的账号在数据库里 **根本不存在**，然后业务逻辑抛出了“账号不存在”的异常，被当成 500 返回给前端。

---

## 2. 先解决“账号不存在”——用对用户名 / 建好数据

### 方案 A：尝试用 `admin` 登录

很多苍穹外卖教程的初始化 SQL 里，默认管理员是：

* 用户名：`admin`
* 密码：`123456`（MD5 存在库里）

你现在 swagger 或前端输入的是：

```json
{
  "username": "admin1",
  "password": "123456"
}
```

👉 你可以先改成：

```json
{
  "username": "admin",
  "password": "123456"
}
```

再试一次，看是否还能报 “账号不存在”。

---

### 方案 B：在 MySQL 里插入 / 修改一个 `admin1` 用户

打开 MySQL（命令行或图形工具），选中你的库 `sky_take_out`，执行：

1. 先看现在到底有什么用户：

   ```sql
   use sky_take_out;
   select id, name, username, password, status from employee;
   ```

2. 如果里面已有一个 `admin`，你想改成 `admin1`，可以这么做（举例）：

   ```sql
   update employee
   set username = 'admin1'
   where username = 'admin';
   ```

3. 如果里面啥都没有，你可以自己插一条（示例，注意避免 id 冲突）：

   ```sql
   insert into employee (name, username, password, status, create_time, update_time, create_user, update_user)
   values ('管理员', 'admin1', 'e10adc3949ba59abbe56e057f20f883e', 1, now(), now(), 1, 1);
   ```

> `e10adc3949ba59abbe56e057f20f883e` 是 `123456` 的 MD5，这和你的 Service 里 `DigestUtils.md5DigestAsHex(password.getBytes())` 对得上。

只要数据库里有一条 `username = admin1` 的记录，再登录就不会再走到 `AccountNotFoundException` 这一步了。

---

## 3. 为什么会直接变成 HTTP 500？

现在抛的是你自己的业务异常：

```text
com.sky.exception.AccountNotFoundException: 账号不存在
```

在完整版的苍穹外卖项目里，一般会有一个类似这样的全局异常处理器：

```java
@RestControllerAdvice
public class GlobalExceptionHandler {

    @ExceptionHandler(AccountNotFoundException.class)
    public Result<String> handleAccountNotFound(AccountNotFoundException ex) {
        return Result.error(ex.getMessage()); // code != 1, msg = "账号不存在"
    }

    // 其他异常处理...
}
```

这样前端收到的是：

```json
{
  "code": 0,
  "msg": "账号不存在"
}
```

HTTP 状态码还是 200，不会是 500。

你现在的情况是：

* 登录逻辑没问题
* 只是找不到用户 ➜ 抛出 `AccountNotFoundException`
* 没有（或没扫到）全局异常处理器 ➜ Spring 把它当成未处理异常 ➜ 返回 500

这个可以稍后再修，你先把数据库里账号搞对，先让**正常登录**跑通。

---

## 4. 整体小结一下现在的状态

* 🔍 日志已经证明：

  * SQL 正常发出
  * MyBatis 正常工作
  * Service 正常执行到 `throw new AccountNotFoundException("账号不存在")`
* ❗ 真正的问题：

  * 用了一个数据库里不存在的用户名：`admin1`
* ✅ 下一步你可以做两件事：

  1. **先用正确的用户名登录**（比如 `admin` / `123456`），确认整条链路通了。
  2. 如果坚持用 `admin1`，就在 `employee` 表里插入 / 修改一条 `username = 'admin1'` 的记录。

你先按上面改一下账号 / 数据库，再试登录。如果还遇到新报错（比如密码不对、账号被锁定等），把那段日志贴出来，我再帮你顺着往下排 👍
